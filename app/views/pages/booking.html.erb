<div class="booking-flex-grow">
  <div class="container booking-form-section py-5">
    <h2 class="text-center mb-5">Demande de disponibilité</h2>

    <!-- Afficher le message d'erreur général -->
    <% if flash[:alert] %>
      <div class="alert alert-danger"><%= flash[:alert] %></div>
    <% end %>

    <!-- Afficher les erreurs de validation pour chaque champ -->
    <% if @booking.errors.any? %>
      <div class="alert alert-danger">
        <h4>Veuillez corriger les erreurs suivantes :</h4>
        <ul>
          <% @booking.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <%= form_with model: @booking, local: true do |f| %>
      <!-- Formulaire inchangé -->
      <div class="form-group mb-3">
        <label for="room">Choisissez une chambre</label>
        <%= f.select :room_type, options_for_select([["Chambre simple", "simple"], ["Studio indépendant", "studio"], ["Appartement partagé", "shared"]]), {}, class: "form-control" %>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label for="check_in">Date d'arrivée</label>
          <%= f.date_field :check_in, class: "form-control" %>
        </div>
        <div class="col-md-6">
          <label for="duration">Durée du séjour</label>
          <%= f.select :duration, options_for_select([["1 semaine", "1_week"], ["1 mois", "1_month"], ["2 mois et plus", "2_months_plus"]]), {}, class: "form-control" %>
        </div>
      </div>

      <!-- Champs supplémentaires -->
      <div class="form-group mb-3">
        <label for="message">Message</label>
        <%= f.text_area :message, class: "form-control", placeholder: "Laissez un message..." %>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label for="first_name">Prénom</label>
          <%= f.text_field :first_name, class: "form-control", required: true %>
        </div>
        <div class="col-md-6">
          <label for="last_name">Nom</label>
          <%= f.text_field :last_name, class: "form-control", required: true %>
        </div>
      </div>

      <div class="form-group mb-3">
        <label for="email">Email</label>
        <%= f.email_field :email, class: "form-control", required: true %>
      </div>

      <div class="form-group mb-3">
        <label for="phone">Téléphone</label>
        <%= f.telephone_field :phone, class: "form-control", required: true %>
      </div>

      <div class="form-group mb-3">
        <label for="address">Adresse</label>
        <%= f.text_field :address, class: "form-control", required: true %>
      </div>

      <div class="text-center">
        <%= f.submit "Envoyer", class: "btn btn-primary btn-lg" %>
      </div>
    <% end %>
  </div>
</div>
